# ============================================================================
#                         应用环境变量配置
# ============================================================================
# 本文件包含 @ys/web (Next.js) 和 @ys/api (NestJS) 两个应用的配置
# 标记说明:
#   [WEB] - 仅 @ys/web 使用
#   [API] - 仅 @ys/api 使用
#   [DB]  - 数据库相关配置
#   [共用] - 两个应用都使用
# ============================================================================

# ==================================
# 基础应用配置
# ==================================
# [共用] 运行环境 (development | production)
NODE_ENV=development

# [WEB] Next.js 应用端口
WEB_PORT=3000

# [API] NestJS 认证服务端口
API_PORT=3001

# [WEB] Next.js 应用基础路径 (可选)
NEXT_PUBLIC_BASE_PATH=

# [WEB] 独立构建模式 (可选)
NEXT_STANDALONE=

# [WEB] 文档服务基础 URL (可选)
DOCS_BASE_URL=

# [API] 字符编码设置
CHARSET=UTF-8

# ==================================
# 数据库配置
# ==================================
# [DB] PostgreSQL 连接字符串 (必需)
DATABASE_URL=postgres://user:password@localhost:5432/ys_framework

# ==================================
# 缓存 & Redis 配置
# ==================================
# [共用] Redis 连接 URL (推荐使用此方式)
REDIS_URL=redis://localhost:6379

# [API] 队列前缀 (可选)
QUEUE_PREFIX=ys:queue

# ==================================
# 认证配置 - NextAuth (WEB)
# ==================================
# [WEB] Auth API 服务地址
AUTH_API_URL=http://localhost:3001

# [WEB] NextAuth.js 密钥 (生成命令: openssl rand -base64 32)
AUTH_SECRET=your_auth_secret_here

# [WEB] Session 过期时间（秒），默认 24 小时
AUTH_SESSION_MAX_AGE=86400

# [WEB] NextAuth URL (用于回调等)
NEXTAUTH_URL=http://localhost:3000

# ==================================
# 认证配置 - JWT (API)
# ==================================
# [API] JWT 签名密钥
JWT_SECRET=your-jwt-secret-key

# [API] JWT 访问令牌过期时间
JWT_EXPIRES_IN=1h

# [API] JWT 刷新令牌过期时间
JWT_REFRESH_EXPIRES_IN=7d

# [API] 启用 JWT 守卫 (默认 true)
ENABLE_JWT_GUARD=true

# [API] 启用资源守卫 (默认 true)
ENABLE_RESOURCE_GUARD=true

# ==================================
# OAuth 配置 (API)
# ==================================
# [API] 飞书 OAuth 配置 (可选)
FEISHU_APP_ID=
FEISHU_APP_SECRET=
FEISHU_REDIRECT_URI=

# ==================================
# 安全 & 验证码配置
# ==================================
# [API] 图形验证码密钥
CAPTCHA_SECRET=your-captcha-secret-key

# [API] 邮件验证码密钥
EMAIL_CAPTCHA_SECRET=your-email-captcha-secret-key

# [共用] Cookie 域名配置 (用于跨子域共享 Cookie，可选)
COOKIE_DOMAIN=.your-domain.com

# ==================================
# 邮件服务配置 (API)
# ==================================
# [API] SMTP 服务器配置
MAIL_HOST=localhost
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=
MAIL_PASS=
MAIL_FROM=noreply@example.com

# [API] 邮件队列配置 (可选)
ENABLE_MAIL_QUEUE=false
MAIL_QUEUE_ATTEMPTS=3
MAIL_QUEUE_BACKOFF=exponential
MAIL_QUEUE_BACKOFF_DELAY=1000

# ==================================
# 文件存储配置 (API)
# ==================================
# [API] MinIO 对象存储配置 (可选)
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=
MINIO_BUCKET=ys-files
MINIO_PUBLIC_BASE_URL=http://localhost:9000

# [API] 文件队列配置 (可选)
ENABLE_FILE_QUEUE=false
ENABLE_FILE_POST_PROCESS=true
ENABLE_FILE_ASYNC_DELETE=false
FILE_QUEUE_ATTEMPTS=3
FILE_QUEUE_BACKOFF=exponential
FILE_QUEUE_BACKOFF_DELAY=1000

# ==================================
# CI/CD 配置
# ==================================
# [WEB] CI 环境标识 (自动设置)
CI=

# [WEB] Playwright 测试配置 (自动设置)
PLAYWRIGHT=
