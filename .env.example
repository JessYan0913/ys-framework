# ============================================================================
#                         应用环境变量配置
# ============================================================================
# 本文件包含 ys-ui (Next.js) 和 ys-api (NestJS) 两个应用的配置
# 标记说明:
#   [UI]  - 仅 ys-ui 使用
#   [API] - 仅 ys-api 使用
#   [共用] - 两个应用都使用
# ============================================================================

# ==================================
# 基础应用配置
# ==================================
# [共用] 运行环境
NODE_ENV=development

# [UI] Next.js 应用端口
WEB_PORT=3000

# [API] NestJS 认证服务端口
API_PORT=3001

# [UI] Next.js 应用 URL (用于 NextAuth 回调)
NEXTAUTH_URL=http://localhost:3000

# [共用] Cookie 域名配置 (用于跨子域共享 Cookie)
COOKIE_DOMAIN=.your-domain.com

# ==================================
# 数据库配置
# ==================================
# [UI] PostgreSQL 连接字符串
DATABASE_URL=postgres://user:password@localhost:5432/myapp

# ==================================
# 缓存 & Redis 配置
# ==================================
# [API] 缓存服务类型: redis | vercel_kv | postgres
CACHE_SERVICE=redis

# [共用] Redis 连接 URL (推荐使用此方式)
REDIS_URL=redis://localhost:6379

# ==================================
# 认证配置 - NextAuth (UI)
# ==================================
# [UI] NextAuth.js 密钥 (生成命令: openssl rand -base64 32)
AUTH_SECRET=your_auth_secret_here

# [UI] Session 过期时间（秒），默认 24 小时
AUTH_SESSION_MAX_AGE=86400

# [UI] Cookie sameSite 属性: lax | none
AUTH_COOKIE_SAME_SITE=lax

# [UI] Cookie secure 属性 (生产环境应设为 true)
AUTH_COOKIE_SECURE=false

# ==================================
# 认证配置 - JWT (API)
# ==================================
# [API] JWT 签名密钥
JWT_SECRET=your-jwt-secret-key

# [API] JWT 访问令牌过期时间
JWT_EXPIRES_IN=1h

# [API] JWT 刷新令牌过期时间
JWT_REFRESH_EXPIRES_IN=7d

# ==================================
# 安全 & 验证码配置
# ==================================
# [API] 图形验证码密钥
CAPTCHA_SECRET=your-captcha-secret-key

# [API] 邮件验证码密钥
EMAIL_CAPTCHA_SECRET=your-email-captcha-secret-key

# ==================================
# 邮件服务配置 (API)
# ==================================
# [API] SMTP 服务器配置
MAIL_HOST=localhost
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=
MAIL_PASS=
MAIL_FROM=noreply@example.com
